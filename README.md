# 入门使用教程

## 🚀 项目介绍

DeepSeek 增强版提示工程系统是一个集成了先进提示工程技术的智能对话系统，支持两种专业模式：

- **编程模式**：专注于代码开发、调试、技术问题解决和架构设计
- **战略分析模式**：专注于商业分析、战略规划、市场研究和决策支持

系统采用四层提示架构，该系统采用三层提示架构（认知架构层、元提示层、系统提示层），确保高质量的响应输出。

```
┌─────────────────────────────────────┐
│      认知架构 (Cognitive)           │
│  定义AI的基本思维方式和推理框架      │
├─────────────────────────────────────┤
│       元提示 (Meta-Prompt)          │
│  定义处理流程、质量标准和执行策略    │
├─────────────────────────────────────┤
│      系统提示 (System)              │
│  Claude风格的深度思考链机制         │
├─────────────────────────────────────┤
│      任务提示 (Task)                │
│  针对特定任务的优化指令             │
└─────────────────────────────────────┘
```


## 📦 安装步骤

### 1. 环境要求

- Python 3.8 或更高版本
- pip 包管理器

### 2. 克隆或下载项目

```bash
# 克隆项目（如果使用Git）
git clone https://github.com/AHIJLN/opendeekthing.git
cd opendeekthink

# 或直接下载并解压项目文件
```

### 3. 安装依赖

```bash
# 建议使用虚拟环境
python -m venv venv

# 激活虚拟环境
# Windows:
venv\Scripts\activate
# macOS/Linux:
source venv/bin/activate

# 安装依赖
pip install -r requirements.txt
```

## ⚙️ 配置说明

### 1. API 密钥配置

#### 方法一：使用环境变量（推荐）

创建 `.env` 文件：

```bash
# .env 文件内容
DEEPSEEK_API_KEY=your-api-key-here
```

#### 方法二：使用配置文件

创建 `config.yaml` 或 `config.json`：

```yaml
# config.yaml 示例
api_key: your-api-key-here
model_name: deepseek-reasoner
temperature: 1.0
max_tokens: 4000
```

```json
// config.json 示例
{
  "api_key": "your-api-key-here",
  "model_name": "deepseek-reasoner",
  "temperature": 1.0,
  "max_tokens": 4000
}
```

### 2. 配置选项说明

| 配置项 | 说明 | 默认值 |
|--------|------|--------|
| `api_key` | DeepSeek API 密钥 | 必填 |
| `model_name` | 使用的模型名称 | deepseek-reasoner |
| `temperature` | 生成温度（0-2） | 1.0 |
| `max_tokens` | 最大生成令牌数 | 4000 |
| `stream_response` | 是否使用流式响应 | true |
| `enable_cognitive` | 启用认知架构层 | true |
| `enable_meta` | 启用元提示层 | true |
| `enable_system` | 启用系统提示层 | true |

## 🎯 基本使用

### 1. 启动程序

```bash
python main.py
```

### 2. 选择工作模式

启动后会看到模式选择界面：

```
==============================================================
请选择工作模式:

1. 编程模式 (Programming Mode)
   编程模式 - 专注于代码开发和技术问题解决
   适用于：代码开发、调试、技术问题解决、架构设计

2. 战略分析模式 (Strategic Analysis Mode)
   战略分析模式 - 专注于商业战略和深度分析
   适用于：商业分析、战略规划、市场研究、决策支持

==============================================================

请选择模式 (1 或 2): 
```

### 3. 开始对话

选择模式后，即可开始对话。系统会根据您选择的模式加载相应的提示架构。

## 🎨 功能特性

### 1. 多种输入模式

- **普通模式**：直接输入，适合短内容
- **多行模式**：支持多行输入，输入 `END` 或双击 Enter 结束
- **粘贴模式**：使用 `/paste` 命令，适合复制粘贴长文本
- **文件模式**：使用 `/file` 命令，从文件读取内容

### 2. 智能输入检测

系统会自动检测输入是否被截断，并智能切换到多行模式。

### 3. 可用命令

| 命令 | 功能 |
|------|------|
| `/help` | 显示帮助信息 |
| `/save` | 保存对话记录为 Markdown 文件 |
| `/clear` | 清空对话历史 |
| `/input` | 切换输入模式 |
| `/file` | 从文件读取输入 |
| `/paste` | 进入粘贴模式 |
| `/debug` | 测试调试功能 |
| `/exit` | 退出程序 |

### 4. 自动保存

每进行 5 轮对话，系统会自动保存对话记录到 `output/conversations` 目录。

### 5. 流式响应

支持实时流式输出，让您能够看到 AI 的思考过程。

## 📝 使用示例

### 示例 1：编程模式

```
您: 请帮我实现一个 Python 装饰器，用于计算函数执行时间

AI (编程模式):
```thinking
[Problem Analysis]
- 需要创建一个装饰器来测量函数执行时间
- 应该支持带参数和不带参数的函数
- 需要保留原函数的元信息
- 输出应该清晰易读

[Solution Design]
- 使用 time 模块记录开始和结束时间
- 使用 functools.wraps 保留函数元信息
- 支持同步和异步函数
```

我将为您实现一个功能完善的执行时间计算装饰器...

[完整代码实现]
```

### 示例 2：战略分析模式

```
您: 分析一下新能源汽车行业的发展趋势和投资机会

AI (战略分析模式):
## 执行摘要
1. 新能源汽车行业正处于高速增长期，预计未来5年复合增长率超过25%
2. 技术突破和政策支持是主要驱动力
3. 建议关注电池技术、智能驾驶和充电基础设施三大投资方向

## 详细分析
[完整的战略分析报告]
```

## 🔧 高级配置

### 1. 自定义提示层

您可以通过修改配置文件来启用或禁用特定的提示层：

```yaml
# 仅启用系统提示层
enable_cognitive: false
enable_meta: false
enable_system: true
```

### 2. 调整模型参数

```yaml
# 更有创造性的输出
temperature: 1.5
top_p: 0.95

# 更长的响应
max_tokens: 8000
```

### 3. 自定义输出目录

```yaml
output_dir: "my_conversations"
markdown_template: "chat_{timestamp}.md"
```

## ❓ 常见问题

### Q1: 如何获取 DeepSeek API 密钥？

访问 [DeepSeek 官网](https://platform.deepseek.com/) 注册账号并获取 API 密钥。

### Q2: 为什么响应速度较慢？

1. 检查网络连接
2. 考虑使用流式响应（默认已启用）
3. 调整 `max_tokens` 参数

### Q3: 如何处理超长输入？

使用以下方法之一：
- 在输入末尾添加 `\` 进入多行模式
- 使用 `/paste` 命令粘贴长文本
- 使用 `/file` 命令从文件读取

### Q4: 对话记录保存在哪里？

默认保存在 `output/conversations` 目录，文件名格式为 `conversation_时间戳.md`。

### Q5: 如何切换工作模式？

在对话过程中无法切换模式。需要使用 `/exit` 退出程序后重新启动选择。

## 🚨 注意事项

1. **API 密钥安全**：不要将 API 密钥提交到版本控制系统
2. **配置文件**：建议使用 `.env` 文件管理敏感信息
3. **输入长度**：注意 API 的令牌限制
4. **费用控制**：留意 API 使用量和费用

## 🔍 调试技巧

1. **查看调试日志**：超过 200 字符的输入会自动保存到 `debug_logs` 目录
2. **测试调试功能**：使用 `/debug` 命令测试调试日志功能
3. **检查配置**：程序启动时会显示当前配置信息



## 🎉 开始使用

现在您已经了解了所有基础知识，可以开始使用 DeepSeek 增强版提示工程系统了！

```bash
python main.py
```

祝您使用愉快！如有任何问题，请参考帮助文档或提交问题反馈。
